/**
 * Created by shadygabal on 12/16/15.
 */

//var express = require('express');
//var router = express.Router();
//
//var dbFolderLocation = "../../db/";
//var helpersFolderLocation = "../../helpers/";
//
//var mongoose = require('app/db/mongoose_connect.js');
//var Soiree = require('app/db/Soiree.js');
//var Business = require('app/db/Business.js');
//var User = require('app/db/User.js');
//
//var DateHelper = require('app/helpers/DateHelper.js');
//var SoireeHelper = require('app/helpers/SoireeHelper.js');

var resHelper = (function() {

    return {
        sendMessage: function (res, status, message) {
            if (status >= 400)
                console.log(message);

            //res.type('text/plain');
            //res.status(status).send(message);
            res.status(status).json({"message" : message});

        },
        sendSuccess:function(res){
            res.json({});
        },
        sendError : function(res, error){
            res.status(404).json({"error" : error});
        },
        render : function(req, res, view, options){
            //if (!options.stylesheets) options.stylesheets = [];

            //var stylesheetsPerRoute = {
            //    /* Businesses */
            //    "businesses/login.hbs" : ["/stylesheets/shared/login.css"]
            //    /* Admins */
            //};

            if (view.indexOf("admins/") === 0){
                if (req.admin && !options.admin) {
                    options.admin = req.admin;
                }
                if(!options.layout) {
                    options.layout = "admins/adminsLayout.hbs";
                }
            }
            else if (view.indexOf("businesses/") === 0){
                if (req.business && !options.business){
                    options.business = req.business;
                }
                if (!options.layout) {
                    options.layout = "businesses/businessesLayout.hbs";
                }
            }
            else{
                if (req.user && !options.user){
                    options.user = req.user;
                }
            }

            if (!options.title){
                options.title = "Soir√©e";
            }

            //for (var i = 0; i < options.stylesheets.length; i++){
            //    var stylesheet = options.stylesheets[i];
            //    if (stylesheet.indexOf("/stylesheets") !== 0){
            //        if (stylesheet.charAt(0) !== "/") {
            //            stylesheet = "/" + stylesheet;
            //        }
            //        if (stylesheet.indexOf(".css") === -1){
            //            stylesheet = stylesheet + ".css";
            //        }
            //
            //        options.stylesheets[i] = "/stylesheets" + stylesheet;
            //    }
            //}
            //
            //var stylesheets = stylesheetsPerRoute[view];
            //if (stylesheets){
            //    options.stylesheets.concat(stylesheets);
            //}

            res.render(view, options);
        }

        //isNextDay: function (firstDate, secondDate) {
        //    var nextDayDiff = 1000 * 60 * 60 * 24;
        //    var midnightOne = new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDay());
        //    var midnightTwo = new Date(secondDate.getFullYear(), secondDate.getMonth(), secondDate.getDay());
        //
        //    var diff = Math.abs(midnightTwo - midnightOne);
        //    return diff == nextDayDiff;
        //}

    }

}());

module.exports = resHelper;
